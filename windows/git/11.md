<h1>Git - Trabalhando com Branches</h1>



Uma **branch** no Git funciona como um ramo independente do código. Ela permite que diferentes versões do projeto sejam desenvolvidas simultaneamente sem afetar a branch principal (geralmente chamada **main**). Cada branch é uma cópia isolada de um commit específico e pode receber novos commits de forma independente da branch de origem.

<br />

> [!NOTE]
>
> Todo Repositório Git possui uma branch padrão, geralmente chamada de **main**.

<br />

<h2>1. Criando uma nova branch</h2>



1. Crie uma nova branch chamada **ramo1** e acesse-a:

```bash
git switch -c ramo1
```

<br />

> [!NOTE]
>
> O comando **git switch** troca de branch, ou seja, sai da branch atual e acessa outra branch indicada no comando. A **opção -c** cria uma nova branch com o nome indicado (em nosso exemplo **ramo1**) e já faz a troca para ela.
>
> Também podemos utilizar o comando **`git checkout -b ramo1`** para criar e trocar de branch.

<br />

2. A imagem abaixo mostra que a branch **ramo1** foi criada e passou a ser a branch ativa:

<div align="left"><img src="https://i.imgur.com/Z56xq1h.png" title="source: imgur.com" /></div>

3. Para checar se está na branch **ramo1**, utilize o comando:

```bash
git branch --show-current
```

<br />

> [!NOTE]
>
> O comando **git branch** permite criar, listar, renomear e excluir branches. Entretanto, ele não permite alternar entre as branches ou fazer fusão do histórico de duas branches em uma.

<br />

4. Edite o arquivo **docker.txt** no **Visual Studio Code** e adicione o texto indicado, como mostra imagem abaixo:

- **docker.txt:** *Esta linha foi inserida na branch ramo1.*

<div align="left"><img src="https://i.imgur.com/QOAdYr5.png" title="source: imgur.com" /></div>

5. Confirme se os arquivos foram atualizados, através do comando:

```bash
git status
```

6. Observe na imagem abaixo, que o arquivo **docker.txt** está pronto para ser adicionado na index:

<div align="left"><img src="https://i.imgur.com/bcs7KDm.png" title="source: imgur.com" /></div>

7. Faça o Commit das alterações, através dos comandos abaixo:

```bash
git add .
```

```bash
git commit -m "Atualizar a branch ramo1"
```

8. Para enviar a branch **ramo1** para o Repositório Remoto no Github, utilize o comando:

```bash
git push origin ramo1
```

<br />

> [!IMPORTANT]
>
> Observe que no comando acima foi indicada a branch **ramo1**, ao invés da branch **main**, depois da palavra `origin`, indicando que a **branch ramo1** será enviada para o Repositório Remoto.

<br />

> [!TIP]
>
> Ao utilizar os comandos **git push** e **git pull**, sempre indique qual branch será enviada ou atualizada com o conteúdo e histórico do Repositório Remoto.

<br />

9. Volte para o Repositório Remoto **aulagit** no Github e observe que agora nós teremos 2 branches, como mostra a imagem abaixo:

<div align="left"><img src="https://i.imgur.com/qBvgTUV.png" title="source: imgur.com" /></div>

<br />

> [!IMPORTANT]
>
> As alterações feitas no arquivo **docker.txt** estão disponíveis apenas na branch **ramo1**. Se você abrir o arquivo docker.txt na branch **main**, verá que o arquivo só tem 2 linhas.

<br />

<h2>2. Unindo o conteúdo da branch main com a branch ramo1</h2>



1. Volte para a branch **main**

```bash
git switch main
```

<br />

> [!NOTE]
>
> Como queremos apenas trocar de branch, não utilizaremos a opção **-c**, que é utilizada para criar uma nova branch.
>
> Também podemos utilizar o comando **`git checkout main`** para trocar de branch.

<br />

2. Edite o arquivo **docker.txt** no Visual Studio Code e observe que o conteúdo do arquivo não foi modificado na branch **main**, como mostra imagem abaixo:

<div align="left"><img src="https://i.imgur.com/5bIRit7.png" title="source: imgur.com" /></div>

3. Vamos unir o conteúdo da branch **ramo1** com a branch **main**, atualizando o arquivo **docker.txt** do Repositório Local com as alterações realizadas na branch **ramo1**, através do comando:

```bash
git merge ramo1
```

4. Abra o arquivo **docker.txt** no Visual Studio Code e observe que o arquivo foi atualizado:

<div align="left"><img src="https://i.imgur.com/QOAdYr5.png" title="source: imgur.com" /></div>

5. Envie as atualizações para a branch main no GitHub, através do comando:

```bash
git push origin main
```

<br />

> [!NOTE]
>
> O comando **git merge** é responsável por fazer a fusão (união) do conteúdo e do histórico de duas branches dentro de uma delas.
>
> No exemplo acima, como a branch ativa é **main**, ela receberá todo o conteúdo e o histórico da branch **ramo1**. A branch **ramo1** não terá seu conteúdo e histórico alterados.

<br />

<h2>3. Como funciona uma branch?</h2>



Como vimos, uma branch (ramo ou ramificação) representa uma linha independente de desenvolvimento. As branches funcionam como um universo paralelo, onde você pode desenvolver uma nova funcionalidade (feature) sem modificar o projeto original.

Vamos analisar o que aconteceu no nosso exemplo:

<div align="left"><img src="https://i.imgur.com/jBH0Jjp.png" title="source: imgur.com" /></div>

1. A branch **main** recebeu inicialmente 4 commits;
2. No commit 4, foi criada a branch **ramo1**;
3. A branch **ramo1** recebeu um novo commit;
4. Ao executar `git merge` na branch **main**, ela receberá todas as atualizações e histórico da branch **ramo1**;
5. O Git mantém o histórico completo do projeto, mesmo após o merge.

O processo de fusão das branches exemplificado acima, fará com que a Branch main unifique os conteúdos e o histórico das duas branches, permitindo que o time de desenvolvimento visualize todas as alterações de ambas as branches, em ordem cronológica, mantendo o histórico completo do projeto.

Neste processo de fusão, podem acontecer alguns erros, entre eles podemos destacar 2:

- **Conflitos (conflicts):** Quando duas pessoas alteram as mesmas linhas ou um arquivo é excluído enquanto outro faz alterações. O Git marca os arquivos em conflito e interrompe o merge.
- **Histórias não Relacionadas (unrelated histories):** Ocorre quando duas branches não compartilham um ancestral comum. O erro “fatal: refusing to merge unrelated histories” indica isso.

<br />

<div align="left"><img src="https://i.imgur.com/fu9QxlT.png" title="source: imgur.com" width="4%"/> <a href="https://git-scm.com/docs/git-branch/pt_BR" target="_blank"><b>Documentação: <i>Git branch</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/fu9QxlT.png" title="source: imgur.com" width="4%"/> <a href="https://git-scm.com/docs/git-switch/pt_BR" target="_blank"><b>Documentação: <i>Git Switch</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/fu9QxlT.png" title="source: imgur.com" width="4%"/> <a href="https://git-scm.com/docs/git-checkout/pt_BR" target="_blank"><b>Documentação: <i>Git Checkout</i></b></a></div>

<div align="left"><img src="https://i.imgur.com/fu9QxlT.png" title="source: imgur.com" width="4%"/> <a href="https://git-scm.com/docs/git-merge/pt_BR" target="_blank"><b>Documentação: <i>Git Merge</i></b></a></div>

<br /><br />


<div align="left"><a href="../README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>